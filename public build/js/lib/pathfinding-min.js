!function(e){if("function"==typeof bootstrap)bootstrap("pf",e);else if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makePF=e}else"undefined"!=typeof window?window.PF=e():global.PF=e()}(function(){return function(e,t,n){function r(n,s){if(!t[n]){if(!e[n]){var o="function"==typeof require&&require;if(!s&&o)return o(n,!0);if(i)return i(n,!0);throw new Error("Cannot find module '"+n+"'")}var u=t[n]={exports:{}};e[n][0].call(u.exports,function(t){var i=e[n][1][t];return r(i?i:t)},u,u.exports)}return t[n].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t){t.exports=e("./lib/heap")},{"./lib/heap":2}],2:[function(e,t){!function(){var e,n,r,i,s,o,u,a,f,l,c,h,p,d,v;r=Math.floor,l=Math.min,n=function(e,t){return t>e?-1:e>t?1:0},f=function(e,t,i,s,o){var u;if(null==i&&(i=0),null==o&&(o=n),0>i)throw new Error("lo must be non-negative");for(null==s&&(s=e.length);s>i;)u=r((i+s)/2),o(t,e[u])<0?s=u:i=u+1;return[].splice.apply(e,[i,i-i].concat(t)),t},o=function(e,t,r){return null==r&&(r=n),e.push(t),d(e,0,e.length-1,r)},s=function(e,t){var r,i;return null==t&&(t=n),r=e.pop(),e.length?(i=e[0],e[0]=r,v(e,0,t)):i=r,i},a=function(e,t,r){var i;return null==r&&(r=n),i=e[0],e[0]=t,v(e,0,r),i},u=function(e,t,r){var i;return null==r&&(r=n),e.length&&r(e[0],t)<0&&(i=[e[0],t],t=i[0],e[0]=i[1],v(e,0,r)),t},i=function(e,t){var i,s,o,u,a,f;for(null==t&&(t=n),u=function(){f=[];for(var t=0,n=r(e.length/2);n>=0?n>t:t>n;n>=0?t++:t--)f.push(t);return f}.apply(this).reverse(),a=[],s=0,o=u.length;o>s;s++)i=u[s],a.push(v(e,i,t));return a},p=function(e,t,r){var i;return null==r&&(r=n),i=e.indexOf(t),-1!==i?(d(e,0,i,r),v(e,i,r)):void 0},c=function(e,t,r){var s,o,a,f,l;if(null==r&&(r=n),o=e.slice(0,t),!o.length)return o;for(i(o,r),l=e.slice(t),a=0,f=l.length;f>a;a++)s=l[a],u(o,s,r);return o.sort(r).reverse()},h=function(e,t,r){var o,u,a,c,h,p,d,v,m,g;if(null==r&&(r=n),10*t<=e.length){if(c=e.slice(0,t).sort(r),!c.length)return c;for(a=c[c.length-1],v=e.slice(t),h=0,d=v.length;d>h;h++)o=v[h],r(o,a)<0&&(f(c,o,0,null,r),c.pop(),a=c[c.length-1]);return c}for(i(e,r),g=[],u=p=0,m=l(t,e.length);m>=0?m>p:p>m;u=m>=0?++p:--p)g.push(s(e,r));return g},d=function(e,t,r,i){var s,o,u;for(null==i&&(i=n),s=e[r];r>t&&(u=r-1>>1,o=e[u],i(s,o)<0);)e[r]=o,r=u;return e[r]=s},v=function(e,t,r){var i,s,o,u,a;for(null==r&&(r=n),s=e.length,a=t,o=e[t],i=2*t+1;s>i;)u=i+1,s>u&&!(r(e[i],e[u])<0)&&(i=u),e[t]=e[i],t=i,i=2*t+1;return e[t]=o,d(e,a,t,r)},e=function(){function e(e){this.cmp=null!=e?e:n,this.nodes=[]}return e.push=o,e.pop=s,e.replace=a,e.pushpop=u,e.heapify=i,e.nlargest=c,e.nsmallest=h,e.prototype.push=function(e){return o(this.nodes,e,this.cmp)},e.prototype.pop=function(){return s(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return a(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return u(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return i(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return p(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return t=new e,t.nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.remove=e.prototype.pop,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),("undefined"!=typeof t&&null!==t?t.exports:void 0)?t.exports=e:window.Heap=e}.call(this)},{}],3:[function(e,t){t.exports={Heap:e("heap"),Node:e("./core/Node"),Grid:e("./core/Grid"),Util:e("./core/Util"),Heuristic:e("./core/Heuristic"),AStarFinder:e("./finders/AStarFinder"),BestFirstFinder:e("./finders/BestFirstFinder"),BreadthFirstFinder:e("./finders/BreadthFirstFinder"),DijkstraFinder:e("./finders/DijkstraFinder"),BiAStarFinder:e("./finders/BiAStarFinder"),BiBestFirstFinder:e("./finders/BiBestFirstFinder"),BiBreadthFirstFinder:e("./finders/BiBreadthFirstFinder"),BiDijkstraFinder:e("./finders/BiDijkstraFinder"),JumpPointFinder:e("./finders/JumpPointFinder"),IDAStarFinder:e("./finders/IDAStarFinder")}},{"./core/Grid":4,"./core/Heuristic":5,"./core/Node":6,"./core/Util":7,"./finders/AStarFinder":8,"./finders/BestFirstFinder":9,"./finders/BiAStarFinder":10,"./finders/BiBestFirstFinder":11,"./finders/BiBreadthFirstFinder":12,"./finders/BiDijkstraFinder":13,"./finders/BreadthFirstFinder":14,"./finders/DijkstraFinder":15,"./finders/IDAStarFinder":16,"./finders/JumpPointFinder":17,heap:1}],4:[function(e,t){function n(e,t,n){this.width=e,this.height=t,this.nodes=this._buildNodes(e,t,n)}var r=e("./Node");n.prototype._buildNodes=function(e,t,n){var s,o,u=new Array(t);for(s=0;t>s;++s)for(u[s]=new Array(e),o=0;e>o;++o)u[s][o]=new r(o,s);if(void 0===n)return u;if(n.length!==t||n[0].length!==e)throw new Error("Matrix size does not fit");for(s=0;t>s;++s)for(o=0;e>o;++o)n[s][o]&&(u[s][o].walkable=!1);return u},n.prototype.getNodeAt=function(e,t){return this.nodes[t][e]},n.prototype.isWalkableAt=function(e,t){return this.isInside(e,t)&&this.nodes[t][e].walkable},n.prototype.isInside=function(e,t){return e>=0&&e<this.width&&t>=0&&t<this.height},n.prototype.setWalkableAt=function(e,t,n){this.nodes[t][e].walkable=n},n.prototype.getNeighbors=function(e,t,n){var r=e.x,i=e.y,s=[],o=!1,u=!1,a=!1,f=!1,l=!1,c=!1,h=!1,p=!1,d=this.nodes;return this.isWalkableAt(r,i-1)&&(s.push(d[i-1][r]),o=!0),this.isWalkableAt(r+1,i)&&(s.push(d[i][r+1]),a=!0),this.isWalkableAt(r,i+1)&&(s.push(d[i+1][r]),l=!0),this.isWalkableAt(r-1,i)&&(s.push(d[i][r-1]),h=!0),t?(n?(u=h&&o,f=o&&a,c=a&&l,p=l&&h):(u=h||o,f=o||a,c=a||l,p=l||h),u&&this.isWalkableAt(r-1,i-1)&&s.push(d[i-1][r-1]),f&&this.isWalkableAt(r+1,i-1)&&s.push(d[i-1][r+1]),c&&this.isWalkableAt(r+1,i+1)&&s.push(d[i+1][r+1]),p&&this.isWalkableAt(r-1,i+1)&&s.push(d[i+1][r-1]),s):s},n.prototype.clone=function(){var e,t,s=this.width,o=this.height,u=this.nodes,a=new n(s,o),f=new Array(o);for(e=0;o>e;++e)for(f[e]=new Array(s),t=0;s>t;++t)f[e][t]=new r(t,e,u[e][t].walkable);return a.nodes=f,a},t.exports=n},{"./Node":6}],5:[function(e,t){t.exports={manhattan:function(e,t){return e+t},euclidean:function(e,t){return Math.sqrt(e*e+t*t)},chebyshev:function(e,t){return Math.max(e,t)}}},{}],6:[function(e,t){function n(e,t,n){this.x=e,this.y=t,this.walkable=void 0===n?!0:n}t.exports=n},{}],7:[function(e,t,n){function r(e){for(var t=[[e.x,e.y]];e.parent;)e=e.parent,t.push([e.x,e.y]);return t.reverse()}function i(e,t){var n=r(e),i=r(t);return n.concat(i.reverse())}function s(e){var t,n,r,i,s,o=0;for(t=1;t<e.length;++t)n=e[t-1],r=e[t],i=n[0]-r[0],s=n[1]-r[1],o+=Math.sqrt(i*i+s*s);return o}function o(e,t,n,r){var i,s,o,u,a,f,l=Math.abs,c=[];for(o=l(n-e),u=l(r-t),i=n>e?1:-1,s=r>t?1:-1,a=o-u;;){if(c.push([e,t]),e===n&&t===r)break;f=2*a,f>-u&&(a-=u,e+=i),o>f&&(a+=o,t+=s)}return c}function u(e,t){var n,r,i,s,u,a,f,l,c,h,p,d,v,m=t.length,g=t[0][0],y=t[0][1],b=t[m-1][0],w=t[m-1][1];for(n=g,r=y,u=t[1][0],a=t[1][1],f=[[n,r]],l=2;m>l;++l){for(h=t[l],i=h[0],s=h[1],p=o(n,r,i,s),v=!1,c=1;c<p.length;++c)if(d=p[c],!e.isWalkableAt(d[0],d[1])){v=!0,f.push([u,a]),n=u,r=a;break}v||(u=i,a=s)}return f.push([b,w]),f}n.backtrace=r,n.biBacktrace=i,n.pathLength=s,n.getLine=o,n.smoothenPath=u},{}],8:[function(e,t){function n(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.heuristic=e.heuristic||s.manhattan,this.weight=e.weight||1}var r=e("heap"),i=e("../core/Util"),s=e("../core/Heuristic");n.prototype.findPath=function(e,t,n,s,o){var u,a,f,l,c,h,p,d,v=new r(function(e,t){return e.f-t.f}),m=o.getNodeAt(e,t),g=o.getNodeAt(n,s),y=this.heuristic,b=this.allowDiagonal,w=this.dontCrossCorners,E=this.weight,S=Math.abs,x=Math.SQRT2;for(m.g=0,m.f=0,v.push(m),m.opened=!0;!v.empty();){if(u=v.pop(),u.closed=!0,u===g)return i.backtrace(g);for(a=o.getNeighbors(u,b,w),l=0,c=a.length;c>l;++l)f=a[l],f.closed||(h=f.x,p=f.y,d=u.g+(0===h-u.x||0===p-u.y?1:x),(!f.opened||d<f.g)&&(f.g=d,f.h=f.h||E*y(S(h-n),S(p-s)),f.f=f.g+f.h,f.parent=u,f.opened?v.updateItem(f):(v.push(f),f.opened=!0)))}return[]},t.exports=n},{"../core/Heuristic":5,"../core/Util":7,heap:1}],9:[function(e,t){function n(e){r.call(this,e);var t=this.heuristic;this.heuristic=function(e,n){return 1e6*t(e,n)}}var r=e("./AStarFinder");n.prototype=new r,n.prototype.constructor=n,t.exports=n},{"./AStarFinder":8}],10:[function(e,t){function n(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.heuristic=e.heuristic||s.manhattan,this.weight=e.weight||1}var r=e("heap"),i=e("../core/Util"),s=e("../core/Heuristic");n.prototype.findPath=function(e,t,n,s,o){var u,a,f,l,c,h,p,d,v=function(e,t){return e.f-t.f},m=new r(v),g=new r(v),y=o.getNodeAt(e,t),b=o.getNodeAt(n,s),w=this.heuristic,E=this.allowDiagonal,S=this.dontCrossCorners,x=this.weight,T=Math.abs,N=Math.SQRT2,C=1,k=2;for(y.g=0,y.f=0,m.push(y),y.opened=C,b.g=0,b.f=0,g.push(b),b.opened=k;!m.empty()&&!g.empty();){for(u=m.pop(),u.closed=!0,a=o.getNeighbors(u,E,S),l=0,c=a.length;c>l;++l)if(f=a[l],!f.closed){if(f.opened===k)return i.biBacktrace(u,f);h=f.x,p=f.y,d=u.g+(0===h-u.x||0===p-u.y?1:N),(!f.opened||d<f.g)&&(f.g=d,f.h=f.h||x*w(T(h-n),T(p-s)),f.f=f.g+f.h,f.parent=u,f.opened?m.updateItem(f):(m.push(f),f.opened=C))}for(u=g.pop(),u.closed=!0,a=o.getNeighbors(u,E,S),l=0,c=a.length;c>l;++l)if(f=a[l],!f.closed){if(f.opened===C)return i.biBacktrace(f,u);h=f.x,p=f.y,d=u.g+(0===h-u.x||0===p-u.y?1:N),(!f.opened||d<f.g)&&(f.g=d,f.h=f.h||x*w(T(h-e),T(p-t)),f.f=f.g+f.h,f.parent=u,f.opened?g.updateItem(f):(g.push(f),f.opened=k))}}return[]},t.exports=n},{"../core/Heuristic":5,"../core/Util":7,heap:1}],11:[function(e,t){function n(e){r.call(this,e);var t=this.heuristic;this.heuristic=function(e,n){return 1e6*t(e,n)}}var r=e("./BiAStarFinder");n.prototype=new r,n.prototype.constructor=n,t.exports=n},{"./BiAStarFinder":10}],12:[function(e,t){function n(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners}var r=e("../core/Util");n.prototype.findPath=function(e,t,n,s,o){var u,a,f,l,c,h=o.getNodeAt(e,t),p=o.getNodeAt(n,s),d=[],v=[],m=this.allowDiagonal,g=this.dontCrossCorners,y=0,b=1;for(d.push(h),h.opened=!0,h.by=y,v.push(p),p.opened=!0,p.by=b;d.length&&v.length;){for(f=d.shift(),f.closed=!0,u=o.getNeighbors(f,m,g),l=0,c=u.length;c>l;++l)if(a=u[l],!a.closed)if(a.opened){if(a.by===b)return r.biBacktrace(f,a)}else d.push(a),a.parent=f,a.opened=!0,a.by=y;for(f=v.shift(),f.closed=!0,u=o.getNeighbors(f,m,g),l=0,c=u.length;c>l;++l)if(a=u[l],!a.closed)if(a.opened){if(a.by===y)return r.biBacktrace(a,f)}else v.push(a),a.parent=f,a.opened=!0,a.by=b}return[]},t.exports=n},{"../core/Util":7}],13:[function(e,t){function n(e){r.call(this,e),this.heuristic=function(){return 0}}var r=e("./BiAStarFinder");n.prototype=new r,n.prototype.constructor=n,t.exports=n},{"./BiAStarFinder":10}],14:[function(e,t){function n(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners}var r=e("../core/Util");n.prototype.findPath=function(e,t,n,s,o){var u,a,f,l,c,h=[],p=this.allowDiagonal,d=this.dontCrossCorners,v=o.getNodeAt(e,t),m=o.getNodeAt(n,s);for(h.push(v),v.opened=!0;h.length;){if(f=h.shift(),f.closed=!0,f===m)return r.backtrace(m);for(u=o.getNeighbors(f,p,d),l=0,c=u.length;c>l;++l)a=u[l],a.closed||a.opened||(h.push(a),a.opened=!0,a.parent=f)}return[]},t.exports=n},{"../core/Util":7}],15:[function(e,t){function n(e){r.call(this,e),this.heuristic=function(){return 0}}var r=e("./AStarFinder");n.prototype=new r,n.prototype.constructor=n,t.exports=n},{"./AStarFinder":8}],16:[function(e,t){function n(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.heuristic=e.heuristic||r.manhattan,this.weight=e.weight||1,this.trackRecursion=e.trackRecursion||!1,this.timeLimit=e.timeLimit||1/0}e("../core/Util");var r=e("../core/Heuristic"),i=e("../core/Node");n.prototype.findPath=function(e,t,n,r,s){var o,u,a,f=0,l=(new Date).getTime(),c=function(e,t){return this.heuristic(Math.abs(t.x-e.x),Math.abs(t.y-e.y))}.bind(this),h=function(e,t){return e.x===t.x||e.y===t.y?1:Math.SQRT2},p=function(e,t,n,r,o){if(f++,this.timeLimit>0&&(new Date).getTime()-l>1e3*this.timeLimit)return 1/0;var u=t+c(e,v)*this.weight;if(u>n)return u;if(e==v)return r[o]=[e.x,e.y],e;var a,d,m,y,b=s.getNeighbors(e,this.allowDiagonal,this.dontCrossCorners);for(m=0,a=1/0;y=b[m];++m){if(this.trackRecursion&&(y.retainCount=y.retainCount+1||1,y.tested!==!0&&(y.tested=!0)),d=p(y,t+h(e,y),n,r,o+1),d instanceof i)return r[o]=[e.x,e.y],d;this.trackRecursion&&0===--y.retainCount&&(y.tested=!1),a>d&&(a=d)}return a}.bind(this),d=s.getNodeAt(e,t),v=s.getNodeAt(n,r),m=c(d,v);for(o=0;!0;++o){if(u=[],a=p(d,0,m,u,0),1/0===a)return[];if(a instanceof i)return u;m=a}return[]},t.exports=n},{"../core/Heuristic":5,"../core/Node":6,"../core/Util":7}],17:[function(e,t){function n(e){e=e||{},this.heuristic=e.heuristic||s.manhattan,this.trackJumpRecursion=e.trackJumpRecursion||!1}var r=e("heap"),i=e("../core/Util"),s=e("../core/Heuristic");n.prototype.findPath=function(e,t,n,s,o){var u,a=this.openList=new r(function(e,t){return e.f-t.f}),f=this.startNode=o.getNodeAt(e,t),l=this.endNode=o.getNodeAt(n,s);for(this.grid=o,f.g=0,f.f=0,a.push(f),f.opened=!0;!a.empty();){if(u=a.pop(),u.closed=!0,u===l)return i.backtrace(l);this._identifySuccessors(u)}return[]},n.prototype._identifySuccessors=function(e){var t,n,r,i,u,a,f,l,c,h,p=this.grid,d=this.heuristic,v=this.openList,m=this.endNode.x,g=this.endNode.y,y=e.x,b=e.y,w=Math.abs;for(Math.max,t=this._findNeighbors(e),i=0,u=t.length;u>i;++i)if(n=t[i],r=this._jump(n[0],n[1],y,b)){if(a=r[0],f=r[1],h=p.getNodeAt(a,f),h.closed)continue;l=s.euclidean(w(a-y),w(f-b)),c=e.g+l,(!h.opened||c<h.g)&&(h.g=c,h.h=h.h||d(w(a-m),w(f-g)),h.f=h.g+h.h,h.parent=e,h.opened?v.updateItem(h):(v.push(h),h.opened=!0))}},n.prototype._jump=function(e,t,n,r){var i,s,o=this.grid,u=e-n,a=t-r;if(!o.isWalkableAt(e,t))return null;if(this.trackJumpRecursion===!0&&(o.getNodeAt(e,t).tested=!0),o.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==u&&0!==a){if(o.isWalkableAt(e-u,t+a)&&!o.isWalkableAt(e-u,t)||o.isWalkableAt(e+u,t-a)&&!o.isWalkableAt(e,t-a))return[e,t]}else if(0!==u){if(o.isWalkableAt(e+u,t+1)&&!o.isWalkableAt(e,t+1)||o.isWalkableAt(e+u,t-1)&&!o.isWalkableAt(e,t-1))return[e,t]}else if(o.isWalkableAt(e+1,t+a)&&!o.isWalkableAt(e+1,t)||o.isWalkableAt(e-1,t+a)&&!o.isWalkableAt(e-1,t))return[e,t];return 0!==u&&0!==a&&(i=this._jump(e+u,t,e,t),s=this._jump(e,t+a,e,t),i||s)?[e,t]:o.isWalkableAt(e+u,t)||o.isWalkableAt(e,t+a)?this._jump(e+u,t+a,e,t):null},n.prototype._findNeighbors=function(e){var t,n,r,i,s,o,u,a,f=e.parent,l=e.x,c=e.y,h=this.grid,p=[];if(f)t=f.x,n=f.y,r=(l-t)/Math.max(Math.abs(l-t),1),i=(c-n)/Math.max(Math.abs(c-n),1),0!==r&&0!==i?(h.isWalkableAt(l,c+i)&&p.push([l,c+i]),h.isWalkableAt(l+r,c)&&p.push([l+r,c]),(h.isWalkableAt(l,c+i)||h.isWalkableAt(l+r,c))&&p.push([l+r,c+i]),!h.isWalkableAt(l-r,c)&&h.isWalkableAt(l,c+i)&&p.push([l-r,c+i]),!h.isWalkableAt(l,c-i)&&h.isWalkableAt(l+r,c)&&p.push([l+r,c-i])):0===r?h.isWalkableAt(l,c+i)&&(h.isWalkableAt(l,c+i)&&p.push([l,c+i]),h.isWalkableAt(l+1,c)||p.push([l+1,c+i]),h.isWalkableAt(l-1,c)||p.push([l-1,c+i])):h.isWalkableAt(l+r,c)&&(h.isWalkableAt(l+r,c)&&p.push([l+r,c]),h.isWalkableAt(l,c+1)||p.push([l+r,c+1]),h.isWalkableAt(l,c-1)||p.push([l+r,c-1]));else for(s=h.getNeighbors(e,!0),u=0,a=s.length;a>u;++u)o=s[u],p.push([o.x,o.y]);return p},t.exports=n},{"../core/Heuristic":5,"../core/Util":7,heap:1}]},{},[3])(3)});